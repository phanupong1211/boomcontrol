<!doctype html>
<html lang="th">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Boom Control</title>
<style>
  body{font-family:system-ui,Segoe UI,Arial;margin:0;padding:24px;background:#0b1220;color:#fff}
  .row{display:flex;gap:16px;flex-wrap:wrap}
  button{
    flex:1 1 240px; font-size:22px; padding:24px; border-radius:18px; border:0;
    background:#2d6cdf; color:#fff; box-shadow:0 8px 24px rgba(0,0,0,.25);
    touch-action:none;
  }
  button:active{transform:translateY(1px);opacity:.9}
  .rev{background:#e04f3f}
  .status{margin-top:16px;opacity:.75}
</style>
<body>
  <h2>🚿 Boom Control (Momentary)</h2>
  <div class="row">
    <button id="fw">Forward (RO1)</button>
    <button id="rev" class="rev">Reverse (RO2)</button>
  </div>
  <div class="status" id="s">ready</div>

<script>
<script>
const BASE = "http://10.28.98.8:1880";  // ถูกต้อง

function call(ro, on) {
  const url = `${BASE}/boom?ro=${ro}&on=${on ? 1 : 0}`;
  fetch(url, { method: 'POST' })
    .then(r => r.json())
    .then(data => document.getElementById('s').textContent = JSON.stringify(data))
    .catch(() => document.getElementById('s').textContent = 'Error');
}

[
  { id: 'fw',  ro: 1 },
  { id: 'rev', ro: 2 }
].forEach(b => {
  const btn = document.getElementById(b.id);
  const down = e => { e.preventDefault(); call(b.ro, true);  };
  const up   = e => { e.preventDefault(); call(b.ro, false); };

  ['pointerdown','touchstart','mousedown'].forEach(ev => btn.addEventListener(ev, down));
  ['pointerup','pointercancel','touchend','mouseup','mouseleave'].forEach(ev => btn.addEventListener(ev, up));
});
</script>

</body>
</html>
